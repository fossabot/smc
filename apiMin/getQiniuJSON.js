var AV=require("leanengine"),requestJS=require("request"),filename=__filename.split("/").pop().split(".js").shift();async function getQiniuJSON(e){var i=e.params.fileNameArr,n=await AV.Cloud.run("getShimoTokenRaw");return console.log(n),new Promise((e,r)=>{requestJS.post(`https://uploader.shimo.im/token?server=qiniu&type=attachments&accessToken=${n}`,{json:!0,body:i},(i,n,t)=>{i?r(!1):(console.log(t),e(t))})})}AV.Cloud.define(filename,async function(e){return await getQiniuJSON(e)}),require("../tools/identifier.js").run({rules:"!vscode||local",func:async()=>{await getQiniuJSON({params:{fileNameArr:["test.mp4"]}})}});