var AV=require("leanengine"),requestJS=require("request"),filename=__filename.split("/").pop().split(".js").shift();async function getQiniuJSON(e){var i=e.params.fileNameArr,n=await AV.Cloud.run("getShimoTokenRaw");return new Promise((e,t)=>{requestJS.post(`https://uploader.shimo.im/token?server=qiniu&type=attachments&accessToken=${n}`,{json:!0,body:i},(i,n,r)=>{i?t(!1):e(r)})})}AV.Cloud.define(filename,async function(e){return await getQiniuJSON(e)});